# 🎯 하이브리드 환수 관리 시스템 실습 가이드

이 가이드는 **Project Aegis** 하이브리드 환수 관리 시스템을 실제로 설정하고 테스트하는 단계별 실습 가이드입니다.

## 🚀 시스템 상태 확인

### 현재 배포 상태
- ✅ **GitHub Repository**: https://github.com/aizimyouok/repayment-dashboard
- ✅ **Live Demo**: https://aizimyouok.github.io/repayment-dashboard  
- ✅ **Google OAuth 설정**: 완료
- ✅ **하이브리드 데이터 서비스**: 구현 완료

## 📋 1단계: 샘플 Google Sheets 생성

### 1.1 Google Sheets 접속 및 생성
1. **sheets.google.com** 접속
2. **"새 스프레드시트"** 클릭
3. 제목을 **"환수 관리 시스템 - 샘플 데이터"**로 변경

### 1.2 샘플 데이터 입력
다음 데이터를 첫 번째 시트에 입력하세요:

| A | B | C | D | E | F | G | H | I |
|---|---|---|---|---|---|---|---|---|
| **ID** | **차용자** | **주민번호** | **연락처** | **입사일** | **퇴사일** | **대출금액** | **대출일** | **상환예정일** |
| 001 | 김철수 | 800101-1234567 | 010-1234-5678 | 2023-01-15 | 2024-03-31 | 1000000 | 2023-02-01 | 2024-12-31 |
| 002 | 이영희 | 850215-2345678 | 010-2345-6789 | 2022-06-10 | | 2000000 | 2022-07-01 | 2025-06-30 |
| 003 | 박민수 | 900320-1234567 | 010-3456-7890 | 2023-03-20 | | 1500000 | 2023-04-01 | 2025-03-31 |
| 004 | 최지현 | 920505-2345678 | 010-4567-8901 | 2021-11-01 | 2024-01-15 | 3000000 | 2021-12-01 | 2024-11-30 |
| 005 | 정한별 | 880712-1234567 | 010-5678-9012 | 2023-08-01 | | 800000 | 2023-09-01 | 2025-08-31 |

### 1.3 추가 컬럼 (선택사항)
| J | K | L | M |
|---|---|---|---|
| **잔여금액** | **상환완료금액** | **상태** | **비고** |
| 500000 | 500000 | 상환중 | 정상 상환 중 |
| 0 | 2000000 | 상환완료 | 완전 상환 |
| 1200000 | 300000 | 상환중 | 월납 진행 |
| 2500000 | 500000 | 연체 | 연락 두절 |
| 800000 | 0 | 미상환 | 상환 계획 수립 중 |

### 1.4 CSV 공개 설정
1. **"파일"** → **"공유"** → **"웹에 게시"** 클릭
2. **"전체 문서"** → **"쉼표로 구분된 값(.csv)"** 선택
3. **"게시"** 버튼 클릭
4. **"링크가 있는 모든 사용자"** 권한으로 설정

### 1.5 시트 ID 복사
브라우저 주소창에서 시트 ID 복사:
```
https://docs.google.com/spreadsheets/d/[여기가_시트_ID]/edit
```

## 🖥️ 2단계: 대시보드 연결 테스트

### 2.1 대시보드 접속
1. **https://aizimyouok.github.io/repayment-dashboard** 접속
2. **Google 로그인** 클릭하여 인증
3. 로그인 성공시 설정 모달이 자동 표시됨

### 2.2 Google Sheets 연결
1. **복사한 시트 ID** 입력
2. **"연결 완료"** 클릭
3. **"실시간 동기화"** 버튼으로 데이터 확인

### 2.3 동작 확인
- ✅ 5명의 샘플 데이터가 표시되는지 확인
- ✅ KPI 카드에 합계가 올바르게 계산되는지 확인
- ✅ 차트에 데이터가 시각화되는지 확인
- ✅ 개인별 테이블에 모든 정보가 표시되는지 확인

## 📝 3단계: Google Forms CRUD 설정

### 3.1 신규 추가 Form 생성
1. **forms.google.com** 접속
2. **"새 양식"** 생성
3. 제목: **"환수 데이터 신규 추가"**

**필드 구성:**
- 차용자명 (단답형, 필수)
- 주민번호 (단답형, 필수)  
- 연락처 (단답형, 필수)
- 입사일 (날짜, 필수)
- 퇴사일 (날짜, 선택)
- 대출금액 (단답형, 필수)
- 대출일 (날짜, 필수)
- 상환예정일 (날짜, 필수)
- 비고 (장문형, 선택)

### 3.2 Form 응답 연결
1. **"응답"** 탭 → **"스프레드시트에서 응답 수집"**
2. **기존 스프레드시트** 선택 (위에서 만든 환수 관리 시트)
3. **"선택"** 클릭

### 3.3 Form URL 복사
1. **"보내기"** → **"링크"** 탭
2. URL 복사하여 메모장에 저장

## ⚙️ 4단계: Apps Script 자동화 (고급)

### 4.1 Apps Script 프로젝트 생성
1. **script.google.com** 접속
2. **"새 프로젝트"** 클릭
3. 프로젝트명: **"환수 관리 자동화"**

### 4.2 기본 자동화 코드 추가
```javascript
function onFormSubmit(e) {
  try {
    console.log('새 응답 제출됨:', e.namedValues);
    
    // 여기에 추가 처리 로직 구현
    // 예: 이메일 알림, 데이터 검증, ID 자동 생성 등
    
    // 간단한 로그 기록
    const ss = SpreadsheetApp.getActiveSpreadsheet();
    const logSheet = ss.getSheetByName('로그') || ss.insertSheet('로그');
    
    logSheet.appendRow([
      new Date(),
      '신규 추가',
      e.namedValues['차용자명'][0],
      Session.getActiveUser().getEmail()
    ]);
    
  } catch (error) {
    console.error('오류 발생:', error);
  }
}
```

### 4.3 트리거 설정
1. **"트리거"** (시계 아이콘) 클릭
2. **"트리거 추가"** 클릭
3. 설정:
   - 실행할 함수: `onFormSubmit`
   - 이벤트 소스: **Google Forms에서**
   - 이벤트 유형: **양식 제출 시**
   - Form 선택: 위에서 만든 신규 추가 Form

## 🧪 5단계: 전체 시스템 테스트

### 5.1 읽기 기능 테스트
1. Google Sheets에서 데이터 수정
2. 대시보드에서 **"실시간 동기화"** 클릭
3. 변경사항이 즉시 반영되는지 확인

### 5.2 쓰기 기능 테스트 (향후)
1. 대시보드에서 **"신규 추가"** 버튼 클릭
2. Google Form에서 테스트 데이터 입력
3. 제출 후 몇 초 대기
4. 대시보드 새로고침하여 추가된 데이터 확인

### 5.3 성능 테스트
- 📊 100개 이상의 레코드로 테스트
- 🔄 동시 접속자 여러 명으로 테스트
- 📱 모바일에서 반응형 확인

## 🎉 6단계: 운영 준비

### 6.1 보안 검토
- ✅ Google OAuth 도메인 제한 확인
- ✅ 시트 접근 권한 최소화
- ✅ Form 제출 권한 설정
- ✅ 개인정보 마스킹 확인

### 6.2 사용자 교육
- 📖 사용자 매뉴얼 작성
- 🎓 관리자 교육 진행  
- 📞 지원 연락처 제공
- 🔧 문제 해결 가이드 준비

### 6.3 백업 및 모니터링
- 💾 정기 백업 일정 수립
- 📈 사용량 모니터링 설정
- 🚨 오류 알림 시스템 구축
- 📋 변경 이력 추적 확인

## 🔍 문제 해결

### 자주 발생하는 문제들

**문제 1: "데이터를 불러올 수 없습니다"**
- 원인: 시트 ID 오류 또는 공개 설정 미완료
- 해결: 시트 ID 재확인, CSV 웹 게시 재설정

**문제 2: "로그인이 되지 않습니다"**  
- 원인: Google OAuth 도메인 설정 문제
- 해결: https://aizimyouok.github.io 에서만 접속

**문제 3: "일부 데이터가 깨져 보입니다"**
- 원인: 한글 인코딩 문제
- 해결: Google Sheets에서 UTF-8 확인

## 📞 지원 및 문의

- **GitHub Issues**: https://github.com/aizimyouok/repayment-dashboard/issues
- **이메일 지원**: 개발자에게 직접 문의
- **실시간 채팅**: GitHub Discussions 활용

---

## 🎯 다음 단계 로드맵

1. **📝 완전한 CRUD 구현** (Google Forms + Apps Script)
2. **📊 고급 분석 기능** (상환율 예측, 리스크 분석)  
3. **🔔 자동 알림 시스템** (상환일 임박, 연체 알림)
4. **📱 모바일 앱** (PWA 또는 네이티브)
5. **🤖 AI 기반 예측** (머신러닝 상환 패턴 분석)

**🎉 축하합니다!** 하이브리드 환수 관리 시스템이 성공적으로 구축되었습니다!
